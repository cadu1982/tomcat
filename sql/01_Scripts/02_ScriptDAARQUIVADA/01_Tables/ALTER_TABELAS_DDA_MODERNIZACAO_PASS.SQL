/*---------------------------------------------------------------------*/
/* SCRIPT CRIADO PARA AS ALTERAÇÕES DE BANCO DE DADOS REFERENTES AO    */
/* PROJETO DE MODERNIZAÇÃO DA CLIQUIDACAO DE COBRANÇA DA CIP.          */
/* 13/01/2023 - ELIANE - CRIAÇÃO DO SCRIPT.                            */
/*---------------------------------------------------------------------*/


USE AB_DDA
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO


IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_TITULOS_PASS'
 AND SYS.COLUMNS.NAME = 'TIPOPESAGREGADOR')
BEGIN
ALTER TABLE MANUT_TITULOS_PASS
ADD   TIPOPESAGREGADOR   		CHAR (01) NULL /* F - FÍSICA J = JURIDICA */
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_TITULOS_PASS'
 AND SYS.COLUMNS.NAME = 'CNPJ_CPF_AGREGADOR')
BEGIN
ALTER TABLE MANUT_TITULOS_PASS
ADD   CNPJ_CPF_AGREGADOR   		VARCHAR (14) NULL
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_TITULOS_PASS'
 AND SYS.COLUMNS.NAME = 'NOMEAGREGADOR')
BEGIN
ALTER TABLE MANUT_TITULOS_PASS
ADD   NOMEAGREGADOR   		VARCHAR (50) NULL
END
GO


IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_TITULOS_PASS'
 AND SYS.COLUMNS.NAME = 'ISPBINICIADORPAGTO')
BEGIN
ALTER TABLE MANUT_TITULOS_PASS
ADD   ISPBINICIADORPAGTO   		VARCHAR (08) NULL 
END
GO


IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_TITULOS_PASS'
 AND SYS.COLUMNS.NAME = 'AGENCIARECEBEDORA')
BEGIN
ALTER TABLE MANUT_TITULOS_PASS
ADD   AGENCIARECEBEDORA   		VARCHAR (04) NULL 
END
GO



IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_TITULOS_PASS'
 AND SYS.COLUMNS.NAME = 'CODMOTIVO')
BEGIN
ALTER TABLE MANUT_TITULOS_PASS
ADD   CODMOTIVO   		VARCHAR (03) NULL /* MOTIVO DE CANCELAMENTO - DDA0116 */
END
GO







IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'RECEBE_ADDA108_RR2_PASS'
 AND SYS.COLUMNS.NAME = 'TIPOPESAGREGADOR')
BEGIN
ALTER TABLE RECEBE_ADDA108_RR2_PASS
ADD   TIPOPESAGREGADOR   		CHAR (01) NULL /* F - FÍSICA J = JURIDICA */
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'RECEBE_ADDA108_RR2_PASS'
 AND SYS.COLUMNS.NAME = 'CNPJ_CPF_AGREGADOR')
BEGIN
ALTER TABLE RECEBE_ADDA108_RR2_PASS
ADD   CNPJ_CPF_AGREGADOR   		VARCHAR (14) NULL
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'RECEBE_ADDA108_RR2_PASS'
 AND SYS.COLUMNS.NAME = 'NOMEAGREGADOR')
BEGIN
ALTER TABLE RECEBE_ADDA108_RR2_PASS
ADD   NOMEAGREGADOR   		VARCHAR (50) NULL
END
GO

/*
IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'RECEBE_ADDA108_RR2_PASS'
 AND SYS.COLUMNS.NAME = 'ISPBINICIADORPAGTO')
BEGIN
ALTER TABLE RECEBE_ADDA108_RR2_PASS
ADD   ISPBINICIADORPAGTO   		VARCHAR (08) NULL 
END
GO

IF EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'RECEBE_ADDA108_RR2_PASS'
 AND SYS.COLUMNS.NAME = 'ISPBINICIADORPAGTO')
BEGIN
ALTER TABLE RECEBE_ADDA108_RR2_PASS
DROP COLUMN   ISPBINICIADORPAGTO   		
END
GO
*/

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'RECEBE_ADDA108_RR2_PASS'
 AND SYS.COLUMNS.NAME = 'AGENCIARECEBEDORA')
BEGIN
ALTER TABLE RECEBE_ADDA108_RR2_PASS
ADD   AGENCIARECEBEDORA   		VARCHAR (04) NULL 
END
GO

-- ######################################################### BAIXA_OPERACIONAL_PASS #########################################################   
 
IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'BAIXAS_OPERACIONAIS_PASS'
 AND SYS.COLUMNS.NAME = 'TIPOPESAGREGADOR')
BEGIN
ALTER TABLE BAIXAS_OPERACIONAIS_PASS
ADD   TIPOPESAGREGADOR   		CHAR (01) NULL /* F - FÍSICA J = JURIDICA */
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'BAIXAS_OPERACIONAIS_PASS'
 AND SYS.COLUMNS.NAME = 'CNPJ_CPF_AGREGADOR')
BEGIN
ALTER TABLE BAIXAS_OPERACIONAIS_PASS
ADD   CNPJ_CPF_AGREGADOR   		VARCHAR (14) NULL
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'BAIXAS_OPERACIONAIS_PASS'
 AND SYS.COLUMNS.NAME = 'NOMEAGREGADOR')
BEGIN
ALTER TABLE BAIXAS_OPERACIONAIS_PASS
ADD   NOMEAGREGADOR   		VARCHAR (50) NULL
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'BAIXAS_OPERACIONAIS_PASS'
 AND SYS.COLUMNS.NAME = 'ISPBINICIADORPAGTO')
BEGIN
ALTER TABLE BAIXAS_OPERACIONAIS_PASS
ADD   ISPBINICIADORPAGTO   		VARCHAR (08) NULL 
END
GO

IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'BAIXAS_OPERACIONAIS_PASS'
 AND SYS.COLUMNS.NAME = 'AGENCIARECEBEDORA')
BEGIN
ALTER TABLE BAIXAS_OPERACIONAIS_PASS
ADD   AGENCIARECEBEDORA   		VARCHAR (04) NULL 
END
GO

-- ######################################################### MANUT_SACELETRONICO_PASS #########################################################   
 
IF NOT EXISTS 
(SELECT * FROM SYS.OBJECTS, SYS.COLUMNS
 WHERE SYS.OBJECTS.OBJECT_ID = SYS.COLUMNS.OBJECT_ID
 AND SYS.OBJECTS.NAME = 'MANUT_SACELETRONICO_PASS'
 AND SYS.COLUMNS.NAME = 'DATAHORADDA')
BEGIN
ALTER TABLE MANUT_SACELETRONICO_PASS
ADD DATAHORADDA DATETIME NULL
END
GO